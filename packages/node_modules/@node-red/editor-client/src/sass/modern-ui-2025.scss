/**
 * NODE-RED 2025 MODERN UI ENHANCEMENTS
 * Bold, Innovative, & Comprehensive Design System
 * ====================================================================
 * 
 * This file contains advanced UI enhancements that bring Node-RED
 * into alignment with 2025 design standards and user expectations.
 * 
 * Features:
 * - Advanced Typography System
 * - Modern Micro-interactions  
 * - Enhanced Visual Hierarchy
 * - Sophisticated Component Design
 * - Improved Accessibility
 * - Fluid Animations & Transitions
 */

// ====================================================================
// MODERN TYPOGRAPHY SYSTEM
// ====================================================================

// Enhanced font loading and display
@font-face {
    font-family: 'Inter';
    font-style: normal;
    font-weight: 100 900;
    font-display: swap;
    src: url('https://rsms.me/inter/font-files/Inter-VariableFont_slnt,wght.woff2?v=3.19') format('woff2');
}

// Typography scale based on modular scale
:root {
    // Modern font stack with enhanced system fonts
    --red-ui-font-primary: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
    --red-ui-font-mono: 'SF Mono', 'Cascadia Code', 'Roboto Mono', Consolas, monospace;
    
    // Typography scale - harmonious proportions
    --red-ui-text-xs: 12px;
    --red-ui-text-sm: 13px;
    --red-ui-text-base: 14px;
    --red-ui-text-lg: 16px;
    --red-ui-text-xl: 18px;
    --red-ui-text-2xl: 20px;
    
    // Line heights for improved readability
    --red-ui-leading-tight: 1.25;
    --red-ui-leading-normal: 1.5;
    --red-ui-leading-relaxed: 1.625;
    
    // Letter spacing for optical refinement
    --red-ui-tracking-tight: -0.025em;
    --red-ui-tracking-normal: 0;
    --red-ui-tracking-wide: 0.025em;
}

// ====================================================================
// ADVANCED LAYOUT SYSTEM
// ====================================================================

// Modern spacing system based on 4px grid
:root {
    --red-ui-space-0: 0;
    --red-ui-space-1: 4px;
    --red-ui-space-2: 8px;
    --red-ui-space-3: 12px;
    --red-ui-space-4: 16px;
    --red-ui-space-5: 20px;
    --red-ui-space-6: 24px;
    --red-ui-space-8: 32px;
    --red-ui-space-10: 40px;
    --red-ui-space-12: 48px;
    --red-ui-space-16: 64px;
    
    // Border radius system for consistent rounded corners
    --red-ui-radius-none: 0;
    --red-ui-radius-sm: 4px;
    --red-ui-radius-md: 6px;
    --red-ui-radius-lg: 8px;
    --red-ui-radius-xl: 12px;
    --red-ui-radius-full: 9999px;
}

// ====================================================================
// ENHANCED COMPONENT STYLES
// ====================================================================

// Modern button system with enhanced states
.red-ui-button {
    // Enhanced typography
    font-family: var(--red-ui-font-primary);
    font-weight: 500;
    letter-spacing: var(--red-ui-tracking-tight);
    
    // Modern spacing and proportions
    padding: var(--red-ui-space-2) var(--red-ui-space-4);
    border-radius: var(--red-ui-radius-md);
    
    // Enhanced transitions for smooth interactions
    transition: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
    transform: translateZ(0); // Hardware acceleration
    
    // Improved focus states for accessibility
    &:focus-visible {
        outline: 2px solid var(--red-ui-form-input-focus-color);
        outline-offset: 2px;
    }
    
    // Modern hover effects
    &:hover:not(:disabled) {
        transform: translateY(-1px);
        box-shadow: var(--red-ui-shadow-elevated);
    }
    
    // Subtle active state
    &:active:not(:disabled) {
        transform: translateY(0);
    }
}

// Enhanced palette nodes with modern design
.red-ui-palette-node {
    border-radius: var(--red-ui-radius-lg);
    transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    
    // Subtle shadow for depth
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
    
    &:hover {
        transform: translateY(-2px);
        box-shadow: var(--red-ui-shadow-elevated);
    }
    
    // Enhanced color system with better contrast
    .red-ui-palette-label {
        font-family: var(--red-ui-font-primary);
        font-weight: 500;
        font-size: var(--red-ui-text-sm);
        line-height: var(--red-ui-leading-tight);
    }
}

// Modern workspace nodes with enhanced visual feedback
.red-ui-flow-node {
    // Enhanced drop shadows for depth perception
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
    transition: filter 0.2s ease;
    
    &:hover {
        filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.15));
    }
    
    // Improved selection states
    &.red-ui-flow-node-selected {
        filter: drop-shadow(0 4px 12px rgba(37, 99, 235, 0.3));
    }
    
    // Enhanced text rendering
    .red-ui-flow-node-label {
        font-family: var(--red-ui-font-primary);
        font-weight: 500;
        text-rendering: optimizeLegibility;
    }
}

// ====================================================================
// ADVANCED SIDEBAR ENHANCEMENTS
// ====================================================================

.red-ui-sidebar {
    // Modern backdrop with subtle texture
    backdrop-filter: blur(10px);
    
    // Enhanced typography throughout
    font-family: var(--red-ui-font-primary);
    
    // Improved tab system
    .red-ui-sidebar-tab {
        border-radius: var(--red-ui-radius-md) var(--red-ui-radius-md) 0 0;
        transition: all 0.15s ease;
        
        &:hover {
            background: var(--red-ui-secondary-background-hover);
        }
        
        &.red-ui-tab-active {
            box-shadow: inset 0 -2px 0 var(--red-ui-secondary-text-color-active);
        }
    }
    
    // Enhanced info panel typography
    .red-ui-sidebar-info {
        line-height: var(--red-ui-leading-relaxed);
        
        h1, h2, h3, h4, h5, h6 {
            font-weight: 600;
            margin-top: var(--red-ui-space-6);
            margin-bottom: var(--red-ui-space-3);
            line-height: var(--red-ui-leading-tight);
        }
        
        p {
            margin-bottom: var(--red-ui-space-4);
        }
        
        code {
            font-family: var(--red-ui-font-mono);
            background: var(--red-ui-tertiary-background);
            padding: var(--red-ui-space-1) var(--red-ui-space-2);
            border-radius: var(--red-ui-radius-sm);
            font-size: 0.9em;
        }
    }
}

// ====================================================================
// MODERN HEADER ENHANCEMENTS
// ====================================================================

.red-ui-header {
    // Enhanced backdrop effect
    backdrop-filter: blur(20px) saturate(180%);
    
    // Subtle bottom border for definition
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    
    // Improved logo area
    .red-ui-header-logo {
        transition: opacity 0.2s ease;
        
        &:hover {
            opacity: 0.8;
        }
    }
    
    // Enhanced deploy button with modern styling
    #btn-deploy {
        font-weight: 600;
        letter-spacing: var(--red-ui-tracking-wide);
        text-transform: uppercase;
        font-size: var(--red-ui-text-xs);
        
        // Enhanced glow effect on hover
        &:hover {
            box-shadow: 0 0 20px rgba(220, 38, 38, 0.3);
        }
    }
}

// ====================================================================
// ENHANCED FORM CONTROLS
// ====================================================================

// Modern input system with improved states
.red-ui-typedInput {
    border-radius: var(--red-ui-radius-md);
    transition: all 0.15s ease;
    
    &:focus-within {
        ring: 2px;
        ring-color: var(--red-ui-form-input-focus-color);
        ring-opacity: 0.5;
        border-color: var(--red-ui-form-input-focus-color);
    }
}

// Enhanced search inputs with modern styling
input[type="search"], 
.red-ui-search-input {
    font-family: var(--red-ui-font-primary);
    border-radius: var(--red-ui-radius-lg);
    padding: var(--red-ui-space-3) var(--red-ui-space-4);
    transition: all 0.15s ease;
    
    &::placeholder {
        color: var(--red-ui-form-placeholder-color);
        font-weight: 400;
    }
    
    &:focus {
        outline: none;
        box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        border-color: var(--red-ui-form-input-focus-color);
    }
}

// ====================================================================
// MICRO-INTERACTIONS & ANIMATIONS
// ====================================================================

// Enhanced loading states
.red-ui-loading {
    .red-ui-spinner {
        animation: spin 1s linear infinite;
    }
}

@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

// Smooth page transitions
.red-ui-editor-stack {
    .red-ui-tray {
        transition: right 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
}

// Enhanced hover effects for interactive elements
.red-ui-editableList-item {
    transition: all 0.15s ease;
    
    &:hover {
        background: var(--red-ui-secondary-background-hover);
        transform: translateX(2px);
    }
}

// ====================================================================
// ACCESSIBILITY ENHANCEMENTS
// ====================================================================

// Enhanced focus indicators
*:focus-visible {
    outline: 2px solid var(--red-ui-form-input-focus-color);
    outline-offset: 2px;
    border-radius: var(--red-ui-radius-sm);
}

// Improved color contrast for links
a {
    color: var(--red-ui-text-color-link);
    text-decoration: none;
    
    &:hover {
        text-decoration: underline;
        text-decoration-thickness: 2px;
        text-underline-offset: 2px;
    }
}

// High contrast mode support
@media (prefers-contrast: high) {
    :root {
        --red-ui-primary-text-color: #000000;
        --red-ui-secondary-background: #ffffff;
        --red-ui-primary-border-color: #000000;
    }
}

// Reduced motion support
@media (prefers-reduced-motion: reduce) {
    * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
    }
}

// ====================================================================
// DARK MODE PREPARATION (Future Enhancement)
// ====================================================================

@media (prefers-color-scheme: dark) {
    :root {
        // Dark mode colors would be defined here
        // This provides a foundation for future dark mode implementation
        color-scheme: dark;
    }
}

// ====================================================================
// RESPONSIVE DESIGN ENHANCEMENTS
// ====================================================================

// Mobile-first responsive breakpoints
@media (max-width: 768px) {
    .red-ui-header {
        padding: var(--red-ui-space-2) var(--red-ui-space-3);
    }
    
    .red-ui-palette-node {
        font-size: var(--red-ui-text-sm);
        padding: var(--red-ui-space-2);
    }
    
    .red-ui-button {
        padding: var(--red-ui-space-3) var(--red-ui-space-4);
        font-size: var(--red-ui-text-sm);
    }
}

@media (max-width: 480px) {
    .red-ui-sidebar {
        width: 100%;
    }
    
    .red-ui-workspace {
        left: 0;
        right: 0;
    }
}