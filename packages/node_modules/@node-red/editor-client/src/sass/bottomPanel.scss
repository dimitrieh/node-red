@use "mixins";

/**
 * Copyright JS Foundation and other contributors, http://js.foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 **/

#red-ui-bottom-panel {
    position: absolute;
    left: 0px;
    right: 0px;
    bottom: 0px;
    height: 200px;
    background: var(--red-ui-primary-background);
    box-sizing: border-box;
    z-index: 10;
    @include mixins.component-border;
    
    // Hide footer when panel is visible
    #red-ui-bottom-panel-footer {
        display: none !important;
    }
}

#red-ui-bottom-panel.closing {
    border-style: dashed;
}

#red-ui-bottom-panel-content {
    position: absolute;
    background: var(--red-ui-secondary-background);
    top: 35px;
    left: 0;
    bottom: 0px;
    right: 0px;
    overflow-y: auto;
}

#red-ui-bottom-panel-separator {
    position: absolute;
    left: 5px;
    bottom: 200px;
    right: 10px;
    height: 7px;
    background-color: transparent;
    cursor: row-resize;

    &:before {
        content: '';
        display: block;
        width: 100%;
        height: 100%;
        -webkit-mask-image: url(images/grip.svg);
        mask-image: url(images/grip.svg);
        -webkit-mask-size: auto;
        mask-size: auto;
        -webkit-mask-position: 50% 50%;
        mask-position: 50% 50%;
        -webkit-mask-repeat: no-repeat;
        mask-repeat: no-repeat;
        background-color: var(--red-ui-grip-color);
        transform: rotate(90deg);
    }
}

.red-ui-bottom-panel-closed > #red-ui-bottom-panel { display: none; }
.red-ui-bottom-panel-closed > #red-ui-bottom-panel-separator { bottom: 0px !important; }
.red-ui-bottom-panel-closed > #red-ui-workspace { bottom: 7px !important; }
.red-ui-bottom-panel-closed > #red-ui-editor-stack { bottom: 8px !important; }

#red-ui-bottom-panel .button {
    @include mixins.workspace-button;
    line-height: 18px;
    font-size: 12px;
    margin-right: 5px;
    padding: 2px 8px;
}

.red-ui-bottom-panel-header {
    color: var(--red-ui-primary-text-color);
    text-align: center;
    padding: 8px 10px;
    background: var(--red-ui-primary-background);
    border-bottom: 1px solid var(--red-ui-secondary-border-color);
    white-space: nowrap;
}

.red-ui-bottom-panel-control-up {
    position: absolute;
    top: -25px;
    right: 50%;
    transform: translateX(50%);
    width: 20px;
    height: 20px;
    background: var(--red-ui-primary-background);
    border: 1px solid var(--red-ui-secondary-border-color);
    border-radius: 3px;
    text-align: center;
    line-height: 18px;
    cursor: pointer;
    z-index: 20;
    
    i {
        font-size: 12px;
        color: var(--red-ui-primary-text-color);
    }
    
    &:hover {
        background: var(--red-ui-secondary-background);
    }
}

// When bottom panel is closed, adjust workspace positioning
.red-ui-bottom-panel-closed {
    #red-ui-workspace {
        bottom: 0px !important;
    }
    
    #red-ui-editor-stack {
        bottom: 0px !important;
    }
    
    #red-ui-sidebar {
        bottom: 0px !important;
    }
    
    #red-ui-sidebar-separator {
        bottom: 10px !important;
    }
    
    // Make the toggle button always visible when panel is closed
    .red-ui-bottom-panel-control-up {
        display: block !important;
    }
    
    // Show tab link buttons when debug panel is closed
    .red-ui-tab-link-buttons {
        display: block !important;
    }
}

// When bottom panel is open
:not(.red-ui-bottom-panel-closed) {
    // Hide the footer when debug panel is open
    #red-ui-bottom-panel-footer {
        display: none !important;
    }
    
    // Hide tab link buttons in bottom panel when open
    #red-ui-bottom-panel .red-ui-tab-link-buttons {
        display: none !important;
    }
    
    // Always show sidebar tab link buttons regardless of debug panel state
    #red-ui-sidebar .red-ui-tab-link-buttons {
        display: block !important;
    }
}

// Debug panel header styling to match palette/info headers
.red-ui-debug-panel-header {
    height: 26px !important;
    line-height: 26px !important;
    padding: 0 9px !important;
    background: var(--red-ui-palette-header-background) !important;
    border-bottom: 1px solid var(--red-ui-primary-border-color) !important;
    color: var(--red-ui-palette-header-color) !important;
    font-weight: bold !important;
    text-align: left !important;
    cursor: default !important;
    
    > i {
        margin-right: 5px;
        vertical-align: middle;
    }
    
    > span {
        display: inline-block;
        vertical-align: middle;
    }
}