/**
* Copyright JS Foundation and other contributors, http://js.foundation
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
**/

@use "colors";
@use "sizes";

/* Floating Window Base Styles */
.red-ui-floating-window {
    position: absolute;
    background: var(--red-ui-primary-background);
    border: 1px solid var(--red-ui-primary-border-color);
    border-radius: 4px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    min-width: 200px;
    min-height: 150px;
    overflow: hidden;
    z-index: 1000;

    &.floating-window-active {
        z-index: 1001;
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
        border-color: var(--red-ui-primary-color);
    }

    &.floating-window-dragging {
        opacity: 0.8;
        z-index: 1002;
        pointer-events: none;
        
        * {
            pointer-events: none;
        }
    }

    .floating-window-header {
        background: var(--red-ui-secondary-background);
        border-bottom: 1px solid var(--red-ui-primary-border-color);
        height: 32px;
        position: relative;
        cursor: move;
        user-select: none;
        display: flex;
        align-items: center;
        padding: 0 8px;
        
        .floating-window-title {
            flex: 1;
            font-size: 12px;
            font-weight: 500;
            color: var(--red-ui-primary-text-color);
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .floating-window-controls {
            display: flex;
            align-items: center;
            gap: 4px;

            button {
                background: none;
                border: none;
                color: var(--red-ui-secondary-text-color);
                cursor: pointer;
                font-size: 12px;
                width: 20px;
                height: 20px;
                border-radius: 2px;
                display: flex;
                align-items: center;
                justify-content: center;

                &:hover {
                    background: rgba(255, 255, 255, 0.1);
                    color: var(--red-ui-primary-text-color);
                }

                &.close-btn:hover {
                    background: #e74c3c;
                    color: white;
                }
            }
        }
    }

    .floating-window-content {
        position: relative;
        height: calc(100% - 32px);
        overflow: hidden;
    }

    /* Resize handles */
    .resize-handle {
        position: absolute;
        background: transparent;
        z-index: 10;

        &.resize-n {
            top: 0;
            left: 4px;
            right: 4px;
            height: 4px;
            cursor: ns-resize;
        }

        &.resize-s {
            bottom: 0;
            left: 4px;
            right: 4px;
            height: 4px;
            cursor: ns-resize;
        }

        &.resize-e {
            top: 4px;
            right: 0;
            bottom: 4px;
            width: 4px;
            cursor: ew-resize;
        }

        &.resize-w {
            top: 4px;
            left: 0;
            bottom: 4px;
            width: 4px;
            cursor: ew-resize;
        }

        &.resize-ne {
            top: 0;
            right: 0;
            width: 8px;
            height: 8px;
            cursor: ne-resize;
        }

        &.resize-nw {
            top: 0;
            left: 0;
            width: 8px;
            height: 8px;
            cursor: nw-resize;
        }

        &.resize-se {
            bottom: 0;
            right: 0;
            width: 8px;
            height: 8px;
            cursor: se-resize;
        }

        &.resize-sw {
            bottom: 0;
            left: 0;
            width: 8px;
            height: 8px;
            cursor: sw-resize;
        }
    }
}

/* Floating palette specific styles */
.red-ui-floating-palette {
    .floating-window-content {
        display: flex;
        flex-direction: column;
        
        #red-ui-palette-container {
            position: relative;
            flex: 1;
            overflow-y: auto;
            overflow-x: hidden;
        }
    }
}

/* Floating sidebar specific styles */
.red-ui-floating-sidebar {
    .floating-window-content {
        display: flex;
        flex-direction: column;
        
        #red-ui-sidebar-tabs {
            flex-shrink: 0;
        }
        
        .red-ui-sidebar-content {
            flex: 1;
            overflow: hidden;
        }
    }
}

/* Animation for window appearance */
.floating-window-appear {
    opacity: 0;
    transform: scale(0.9);
    animation: floatingWindowAppear 0.2s ease-out forwards;
}

@keyframes floatingWindowAppear {
    to {
        opacity: 1;
        transform: scale(1);
    }
}

/* Window snapping indicators */
.window-snap-indicator {
    position: fixed;
    background: rgba(74, 144, 226, 0.3);
    border: 2px solid #4a90e2;
    pointer-events: none;
    z-index: 999;
    opacity: 0;
    transition: opacity 0.2s ease;

    &.active {
        opacity: 1;
    }
}