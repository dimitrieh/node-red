/**
 * Node-RED Mobile & Tablet Responsive Styles
 * Optimized for touch devices with intelligent UI adaptations
 */

// ============================================================================
// MOBILE BREAKPOINTS & VARIABLES
// ============================================================================

$mobile-breakpoint: 450px;
$tablet-breakpoint: 768px;
$desktop-breakpoint: 1024px;

$mobile-header-height: 50px;
$tablet-header-height: 45px;
$mobile-touch-target: 44px;
$mobile-spacing: 16px;
$tablet-spacing: 12px;

// ============================================================================
// MOBILE NAVIGATION COMPONENTS
// ============================================================================

// Mobile hamburger menu button
.red-ui-mobile-menu-button {
    display: none;
    position: fixed;
    top: 10px;
    left: 10px;
    z-index: 1000;
    background: var(--red-ui-primary-background);
    border: 2px solid var(--red-ui-primary-border-color);
    border-radius: 8px;
    width: $mobile-touch-target;
    height: $mobile-touch-target;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    
    &:before {
        content: '☰';
        font-size: 20px;
        color: var(--red-ui-primary-text-color);
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        height: 100%;
    }
    
    &.active:before {
        content: '✕';
    }
    
    &:hover {
        background: var(--red-ui-secondary-background);
        transform: scale(1.05);
    }
}

// Mobile sidebar toggle button  
.red-ui-mobile-sidebar-button {
    display: none;
    position: fixed;
    top: 10px;
    right: 10px;
    z-index: 1000;
    background: var(--red-ui-primary-background);
    border: 2px solid var(--red-ui-primary-border-color);
    border-radius: 8px;
    width: $mobile-touch-target;
    height: $mobile-touch-target;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    
    &:before {
        content: 'ℹ';
        font-size: 20px;
        color: var(--red-ui-primary-text-color);
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        height: 100%;
    }
    
    &:hover {
        background: var(--red-ui-secondary-background);
        transform: scale(1.05);
    }
}

// ============================================================================
// MOBILE RESPONSIVE LAYOUTS
// ============================================================================

@media only screen and (max-width: $mobile-breakpoint) {
    
    // Show mobile navigation buttons
    .red-ui-mobile-menu-button,
    .red-ui-mobile-sidebar-button {
        display: block;
    }
    
    // Adjust header for mobile
    #red-ui-header {
        height: $mobile-header-height !important;
        padding: 8px 60px; // Space for mobile buttons
        
        .red-ui-header-logo {
            font-size: 16px;
        }
        
        // Hide non-essential header items
        .red-ui-header-button:not(.red-ui-deploy-button) {
            display: none;
        }
        
        // Make deploy button touch-friendly
        .red-ui-deploy-button {
            min-width: $mobile-touch-target;
            min-height: 36px;
            font-size: 14px;
            padding: 8px 16px;
        }
    }
    
    // Adjust main container
    #red-ui-main-container {
        top: $mobile-header-height !important;
    }
    
    // Hide palette by default on mobile
    #red-ui-palette {
        transform: translateX(-100%);
        transition: transform 0.3s ease-in-out;
        z-index: 999;
        box-shadow: 2px 0 10px rgba(0,0,0,0.2);
        
        &.mobile-visible {
            transform: translateX(0);
        }
    }
    
    // Hide sidebar by default on mobile
    #red-ui-sidebar {
        transform: translateX(100%);
        transition: transform 0.3s ease-in-out;
        z-index: 999;
        box-shadow: -2px 0 10px rgba(0,0,0,0.2);
        
        &.mobile-visible {
            transform: translateX(0);
        }
    }
    
    // Full-width workspace when panels are hidden
    #red-ui-workspace {
        left: 0 !important;
        right: 0 !important;
        width: 100% !important;
    }
    
    // Mobile-specific workspace adjustments
    .red-ui-workspace-chart {
        // Increase node connection areas for touch
        .red-ui-flow-node {
            .red-ui-flow-port {
                r: 8; // Larger connection points
            }
        }
    }
    
    // Increase font sizes for readability
    body {
        font-size: 16px; // Prevent zoom on focus
    }
    
    // Touch-friendly buttons
    button, .red-ui-button, .red-ui-header-button {
        min-height: $mobile-touch-target;
        min-width: $mobile-touch-target;
        padding: 8px 12px;
        font-size: 14px;
        border-radius: 6px;
    }
    
    // Touch-friendly form elements
    input, select, textarea {
        min-height: $mobile-touch-target;
        font-size: 16px; // Prevent zoom
        padding: 12px;
        border-radius: 6px;
    }
    
    // Optimize workspace toolbar for mobile
    #red-ui-workspace-toolbar {
        padding: 8px;
        
        .red-ui-workspace-button {
            margin: 2px;
            min-width: 36px;
            min-height: 36px;
        }
    }
}

// ============================================================================
// TABLET RESPONSIVE LAYOUTS
// ============================================================================

@media only screen and (min-width: #{$mobile-breakpoint + 1px}) and (max-width: $tablet-breakpoint) {
    
    // Tablet header adjustments
    #red-ui-header {
        height: $tablet-header-height !important;
        padding: 8px 12px;
    }
    
    #red-ui-main-container {
        top: $tablet-header-height !important;
    }
    
    // Responsive palette width for tablet
    #red-ui-palette {
        width: 250px !important; // Narrower than desktop
        
        .red-ui-palette-category {
            .red-ui-palette-node {
                margin: 4px 2px; // Tighter spacing
            }
        }
    }
    
    // Responsive sidebar width for tablet
    #red-ui-sidebar {
        width: 280px !important; // Narrower than desktop
        right: 0 !important;
    }
    
    // Adjust workspace for narrower panels
    #red-ui-workspace {
        left: 250px !important;
        right: 280px !important;
    }
    
    // Touch-optimized buttons for tablet
    button, .red-ui-button {
        min-height: 38px;
        padding: 6px 12px;
    }
    
    // Tablet form elements
    input, select, textarea {
        min-height: 38px;
        font-size: 14px;
        padding: 10px;
    }
}

// ============================================================================
// MOBILE OVERLAY STYLES
// ============================================================================

// Overlay backdrop when mobile panels are open
.red-ui-mobile-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: 998;
    opacity: 0;
    transition: opacity 0.3s ease-in-out;
    
    &.active {
        display: block;
        opacity: 1;
    }
}

// ============================================================================
// MOBILE TYPOGRAPHY & READABILITY
// ============================================================================

@media only screen and (max-width: $mobile-breakpoint) {
    // Ensure minimum readable font sizes
    .red-ui-editor {
        font-size: 14px;
        line-height: 1.5;
    }
    
    // Larger text for important elements
    .red-ui-palette-label,
    .red-ui-sidebar-header,
    .red-ui-tab-label {
        font-size: 16px !important;
        font-weight: 500;
    }
    
    // Increase spacing for touch interaction
    .red-ui-palette-category {
        margin-bottom: 12px;
        
        .red-ui-palette-header {
            padding: 12px 8px;
            min-height: $mobile-touch-target;
        }
    }
    
    // Touch-friendly tabs
    .red-ui-tabs {
        li {
            min-height: $mobile-touch-target;
            
            a {
                padding: 12px 16px;
                font-size: 14px;
            }
        }
    }
}

// ============================================================================
// MOBILE UTILITY CLASSES
// ============================================================================

.mobile-hide {
    @media only screen and (max-width: $mobile-breakpoint) {
        display: none !important;
    }
}

.mobile-show {
    display: none !important;
    
    @media only screen and (max-width: $mobile-breakpoint) {
        display: block !important;
    }
}

.tablet-hide {
    @media only screen and (min-width: #{$mobile-breakpoint + 1px}) and (max-width: $tablet-breakpoint) {
        display: none !important;
    }
}

.tablet-show {
    display: none !important;
    
    @media only screen and (min-width: #{$mobile-breakpoint + 1px}) and (max-width: $tablet-breakpoint) {
        display: block !important;
    }
}

// Touch-friendly utility class
.touch-target {
    min-width: $mobile-touch-target;
    min-height: $mobile-touch-target;
    touch-action: manipulation; // Improve touch responsiveness
}